{% extends 'layout.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-primary bg-opacity-25 text-light">
                <h2 class="mb-0"><i class="fas fa-video me-2"></i>Video Dubber</h2>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h4>Automatically dub your videos in any language</h4>
                        <p class="text-muted">
                            Upload your video, select a target language, and we'll automatically:
                        </p>
                        <ul class="feature-list">
                            <li><i class="fas fa-waveform me-2"></i>Extract audio from your video</li>
                            <li><i class="fas fa-microphone me-2"></i>Transcribe the audio using OpenAI Whisper</li>
                            <li><i class="fas fa-language me-2"></i>Translate the transcription to your target language</li>
                            <li><i class="fas fa-volume-up me-2"></i>Generate dubbed audio in the target language</li>
                            <li><i class="fas fa-film me-2"></i>Merge the dubbed audio with your original video</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <!-- Upload Form -->
                        <form id="uploadForm" enctype="multipart/form-data" class="needs-validation" novalidate>
                            <div class="mb-3">
                                <label for="video" class="form-label">Upload Video</label>
                                <input type="file" class="form-control" id="video" name="video" accept=".mp4,.avi,.mov,.mkv,.webm" required>
                                <div class="invalid-feedback">
                                    Please select a video file.
                                </div>
                                <div class="form-text">
                                    Supported formats: MP4, AVI, MOV, MKV, WEBM
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="target_language" class="form-label">Target Language</label>
                                <select class="form-select" id="target_language" name="target_language" required>
                                    <option value="">Select a language</option>
                                    <option value="af">Afrikaans</option>
                                    <option value="ar">Arabic</option>
                                    <option value="bg">Bulgarian</option>
                                    <option value="ca">Catalan</option>
                                    <option value="cs">Czech</option>
                                    <option value="da">Danish</option>
                                    <option value="de">German</option>
                                    <option value="el">Greek</option>
                                    <option value="en">English</option>
                                    <option value="es">Spanish</option>
                                    <option value="et">Estonian</option>
                                    <option value="fi">Finnish</option>
                                    <option value="fr">French</option>
                                    <option value="hi">Hindi</option>
                                    <option value="hu">Hungarian</option>
                                    <option value="id">Indonesian</option>
                                    <option value="it">Italian</option>
                                    <option value="ja">Japanese</option>
                                    <option value="ko">Korean</option>
                                    <option value="lt">Lithuanian</option>
                                    <option value="lv">Latvian</option>
                                    <option value="ms">Malay</option>
                                    <option value="nl">Dutch</option>
                                    <option value="no">Norwegian</option>
                                    <option value="pl">Polish</option>
                                    <option value="pt">Portuguese</option>
                                    <option value="ro">Romanian</option>
                                    <option value="ru">Russian</option>
                                    <option value="sk">Slovak</option>
                                    <option value="sl">Slovenian</option>
                                    <option value="sv">Swedish</option>
                                    <option value="th">Thai</option>
                                    <option value="tr">Turkish</option>
                                    <option value="uk">Ukrainian</option>
                                    <option value="vi">Vietnamese</option>
                                    <option value="zh-CN">Chinese (Simplified)</option>
                                    <option value="zh-TW">Chinese (Traditional)</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please select a target language.
                                </div>
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary" id="uploadBtn">
                                    <i class="fas fa-upload me-2"></i>Upload and Process
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Processing status card (hidden by default) -->
        <div class="card shadow-sm mb-4" id="processingCard" style="display: none;">
            <div class="card-header bg-info bg-opacity-25 text-light">
                <h3 class="mb-0"><i class="fas fa-cogs me-2"></i>Processing Your Video</h3>
            </div>
            <div class="card-body">
                <div id="processingStatus">
                    <div class="d-flex justify-content-between mb-2">
                        <div id="statusMessage">Uploading video...</div>
                        <div id="statusPercentage">0%</div>
                    </div>
                    <div class="progress mb-4">
                        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="d-grid mt-3">
                        <a href="#" class="btn btn-success" id="downloadBtn" style="display: none;">
                            <i class="fas fa-download me-2"></i>Download Dubbed Video
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- How it works card -->
        <div class="card shadow-sm">
            <div class="card-header bg-secondary bg-opacity-25 text-light">
                <h3 class="mb-0"><i class="fas fa-info-circle me-2"></i>How It Works</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="card h-100 bg-dark">
                            <div class="card-body text-center">
                                <div class="display-4 mb-3 text-primary">
                                    <i class="fas fa-upload"></i>
                                </div>
                                <h5 class="card-title">1. Upload Your Video</h5>
                                <p class="card-text text-muted">Upload any video file in a supported format and select your target language.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card h-100 bg-dark">
                            <div class="card-body text-center">
                                <div class="display-4 mb-3 text-warning">
                                    <i class="fas fa-cogs"></i>
                                </div>
                                <h5 class="card-title">2. AI Processing</h5>
                                <p class="card-text text-muted">Our system transcribes your audio, translates it, and generates dubbed speech in the target language.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="card h-100 bg-dark">
                            <div class="card-body text-center">
                                <div class="display-4 mb-3 text-success">
                                    <i class="fas fa-download"></i>
                                </div>
                                <h5 class="card-title">3. Download Result</h5>
                                <p class="card-text text-muted">Once processing is complete, download your freshly dubbed video ready for use.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
